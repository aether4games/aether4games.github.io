<!DOCTYPE html>
<html lang="ko">

<head>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PQ0DNV2SRV"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-PQ0DNV2SRV');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>원가율 계산 도구</title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <script>tailwind.config = { theme: { extend: { colors: { primary: '#1E88E5', secondary: '#F5F9FF' }, borderRadius: { 'none': '0px', 'sm': '4px', DEFAULT: '8px', 'md': '12px', 'lg': '16px', 'xl': '20px', '2xl': '24px', '3xl': '32px', 'full': '9999px', 'button': '8px' } } } }</script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
        rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"></script>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9217450376995807" crossorigin="anonymous"></script>
        <style>
        :where([class^="ri-"])::before {
            content: "\f3c2";
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #F5F9FF;
        }

        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type=number] {
            -moz-appearance: textfield;
        }

        .step-indicator {
            position: relative;
        }

        .step-indicator::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #E5E7EB;
            z-index: 0;
        }

        .step-progress {
            position: absolute;
            top: 50%;
            left: 0;
            height: 2px;
            background-color: #1E88E5;
            z-index: 1;
            transition: width 0.3s ease;
        }

        .custom-switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }

        .custom-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .switch-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #E5E7EB;
            transition: .4s;
            border-radius: 24px;
        }

        .switch-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.switch-slider {
            background-color: #1E88E5;
        }

        input:checked+.switch-slider:before {
            transform: translateX(20px);
        }
        input:checked+.switch-slider:before {
    transform: translateX(20px);
}

/* 여기에 새 스타일 추가 */
.card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}
.hero-section {
    background-color: #1E88E5;
    background-image: linear-gradient(135deg, #1E88E5 0%, #64B5F6 100%);
}
</style>
    </style>
</head>

<body class="min-h-screen">

    <body class="min-h-screen">

<!-- 후원 배너 / 메인 네비게이션 -->
<div class="bg-primary py-12 mb-8 cursor-pointer" onclick="showMainTab()">
    <div class="container mx-auto px-4 max-w-5xl">
        <div class="text-center text-white">
            <h2 class="text-4xl font-bold mb-4">매일 고생하는 사장님들을 위해</h2>
            <p class="text-2xl mb-6">팔도장사는 장사에 꼭 필요한 아이템만 담았습니다. 지금 바로 활용해보세요.</p>                      
        </div>
    </div>
</div>
        <!-- 계산기 콘텐츠 영역 -->
<div class="container mx-auto max-w-5xl px-4">
    <!-- 메인 섹션 추가 -->
    <div id="main" class="calculator-section block">
        <!-- 메인 콘텐츠 섹션 시작 -->
        <section class="py-12 px-4">
            <div class="container mx-auto max-w-6xl">
<!-- 네비게이션 카드 -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
    <!-- 네비게이션 카드 1 -->
    <div class="card bg-white rounded shadow-md p-6 text-center flex flex-col h-full">
        <div class="w-16 h-16 flex items-center justify-center mx-auto mb-4 bg-primary/10 rounded-full">
            <i class="ri-calculator-line ri-2x text-primary"></i>
        </div>
        <h3 class="text-lg font-semibold mb-2">상품 원가 계산</h3>
        <p class="text-gray-600 mb-4 flex-grow">상품의 원가를 정확히 계산하여 적정 판매가격과 수익성을 분석합니다.</p>
        <div class="mt-auto">
            <button class="calculator-tab text-primary font-medium flex items-center mx-auto" data-target="calculator-cost">
                계산기 이용하기 <i class="ri-arrow-right-line ml-1"></i>
            </button>
        </div>
    </div>
    <!-- 네비게이션 카드 2 -->
    <div class="card bg-white rounded shadow-md p-6 text-center flex flex-col h-full">
        <div class="w-16 h-16 flex items-center justify-center mx-auto mb-4 bg-primary/10 rounded-full">
            <i class="ri-table-line ri-2x text-primary"></i>
        </div>
        <h3 class="text-lg font-semibold mb-2">테이블 회전 매출 계산</h3>
        <p class="text-gray-600 mb-4 flex-grow">테이블 회전율과 객단가를 기반으로 예상 매출을 계산하고 목표 수치를 설정합니다.</p>
        <div class="mt-auto">
            <button class="calculator-tab text-primary font-medium flex items-center mx-auto" data-target="calculator-table">
                계산기 이용하기 <i class="ri-arrow-right-line ml-1"></i>
            </button>
        </div>
    </div>
    <!-- 네비게이션 카드 3 -->
    <div class="card bg-white rounded shadow-md p-6 text-center flex flex-col h-full">
        <div class="w-16 h-16 flex items-center justify-center mx-auto mb-4 bg-primary/10 rounded-full">
            <i class="ri-funds-line ri-2x text-primary"></i>
        </div>
        <h3 class="text-lg font-semibold mb-2">손익 계산</h3>
        <p class="text-gray-600 mb-4 flex-grow">매출액과 비용 구조를 분석하여 손익을 계산하고 수익성을 개선할 수 있는 방안을 제시합니다.</p>
        <div class="mt-auto">
            <button class="calculator-tab text-primary font-medium flex items-center mx-auto" data-target="calculator-goal">
                계산기 이용하기 <i class="ri-arrow-right-line ml-1"></i>
            </button>
        </div>
    </div>
</div>
                <!-- 콘텐츠 카드 -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- 콘텐츠 카드 1 -->
                    <div class="card bg-white rounded shadow-md overflow-hidden">
                        <div class="h-48 overflow-hidden">
                            <img src="images/테스트.jpg" alt="마케팅 배너" class="w-full h-full object-cover object-top">
                        </div>
                        <div class="p-6">
                            <h3 class="text-lg font-semibold mb-2">오늘 뭐먹Chef</h3>
                            <p class="text-gray-600 mb-4">간단한 룰렛만 돌리면, 지금 먹기 딱 좋은 메뉴를 추천해드립니다.
                                매일매일 새로운 메뉴 조합으로, 식사시간이 더 즐거워집니다.</p>
                            <button class="text-primary font-medium flex items-center">
                                자세히 보기 <i class="ri-arrow-right-line ml-1"></i>
                                
                            </button>
                        </div>
                    </div>
                    <!-- 콘텐츠 카드 2 -->
                    <div class="card bg-white rounded shadow-md overflow-hidden">
                        <div class="h-48 overflow-hidden">
                            <img src="/api/placeholder/400/300" alt="디지털 광고" class="w-full h-full object-cover object-top">
                        </div>
                        <div class="p-6">
                            <h3 class="text-lg font-semibold mb-2">팔도쉐프 레시피</h3>
                            <p class="text-gray-600 mb-4">“장사에 바로 써먹는, 실전 레시피만 모았습니다.”
                                현직 쉐프와 인기 유튜버들이 직접 만든 메뉴,
                                따라 하면 그대로 완성되는 검증된 조리법을 공개합니다.</p>
                            <button class="text-primary font-medium flex items-center">
                                자세히 보기 <i class="ri-arrow-right-line ml-1"></i>
                            </button>
                        </div>
                    </div>
                    <!-- 콘텐츠 카드 3 -->
                    <div class="card bg-white rounded shadow-md overflow-hidden">
                        <div class="h-48 overflow-hidden">
                            <img src="/api/placeholder/400/300" alt="성과 분석" class="w-full h-full object-cover object-top">
                        </div>
                        <div class="p-6">
                            <h3 class="text-lg font-semibold mb-2">지금 뜨는 프랜차이즈</h3>
                            <p class="text-gray-600 mb-4">“지금 가장 뜨는 브랜드는 어디일까?”
                                소자본 창업부터 대형 프랜차이즈까지,
                                지금 창업 시장에서 가장 주목받는 브랜드를 데이터로 분석해드립니다.</p>
                            <button class="text-primary font-medium flex items-center">
                                자세히 보기 <i class="ri-arrow-right-line ml-1"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 소개 섹션 시작 -->
        <section class="py-16 bg-gradient-to-b from-white to-gray-50">
            <div class="container mx-auto px-4">
                <!-- 섹션 1: 플랫폼 개요 -->
                <div class="flex flex-col lg:flex-row items-center gap-12 mb-24">
                    <div class="lg:w-1/2">
                        <h2 class="text-3xl font-bold mb-6">혁신적인 디지털 마케팅 플랫폼</h2>
                        <p class="text-gray-600 text-lg leading-relaxed mb-8">
                            소상공인의 성공을 위한 맞춤형 디지털 마케팅 솔루션을 제공합니다. 
                            데이터 기반의 정확한 타겟팅과 효율적인 광고 집행으로 
                            최적의 마케팅 성과를 달성하세요.
                        </p>
                        <div class="flex gap-4">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-primary mb-2">98%</div>
                                <div class="text-gray-600">고객 만족도</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-primary mb-2">2.5x</div>
                                <div class="text-gray-600">평균 ROI</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-primary mb-2">5000+</div>
                                <div class="text-gray-600">성공 사례</div>
                            </div>
                        </div>
                    </div>
                    <div class="lg:w-1/2">
                        <img src="/api/placeholder/600/400" alt="플랫폼 개요" class="rounded-lg shadow-xl">
                    </div>
                </div>
                <!-- 섹션 2: 주요 기능 -->
                <div class="flex flex-col lg:flex-row-reverse items-center gap-12">
                    <div class="lg:w-1/2">
                        <h2 class="text-3xl font-bold mb-6">스마트한 마케팅 자동화</h2>
                        <p class="text-gray-600 text-lg leading-relaxed mb-8">
                            AI 기반의 자동화된 마케팅 도구로 시간과 비용을 절약하세요. 
                            실시간 데이터 분석과 자동 최적화로 마케팅 효율을 
                            극대화할 수 있습니다.
                        </p>
                        <ul class="space-y-4">
                            <li class="flex items-center gap-3">
                                <i class="ri-check-line text-primary"></i>
                                <span>실시간 성과 모니터링</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <i class="ri-check-line text-primary"></i>
                                <span>AI 기반 타겟 고객 분석</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <i class="ri-check-line text-primary"></i>
                                <span>자동화된 캠페인 최적화</span>
                            </li>
                        </ul>
                    </div>
                    <div class="lg:w-1/2">
                        <img src="/api/placeholder/600/400" alt="마케팅 자동화" class="rounded-lg shadow-xl">
                    </div>
                </div>
            </div>
        </section>
        <!-- 소개 섹션 끝 -->
    </div>

        <!-- 계산기 콘텐츠 영역 -->
        <div class="container mx-auto max-w-5xl px-4">
            <div id="calculator-cost" class="calculator-section hidden">
                <div class="container mx-auto px-4 py-8 max-w-5xl">
                    <div class="flex items-center mb-8">
                        <h1 class="text-3xl font-bold text-gray-800 font-['Pacifico']">팔도장사 원가계산기</h1>
                    </div>
                    <div class="step-indicator mb-10 relative">
                        <div class="step-progress" id="step-progress" style="width: 0%;"></div>
                        <div class="flex justify-between relative z-10">
                            <div class="step-item flex flex-col items-center">
                                <div id="step-circle-1"
                                    class="w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center mb-2 shadow-md">
                                    1</div>
                                <span id="step-text-1" class="text-sm font-medium text-primary">상품 정보</span>
                            </div>
                            <div class="step-item flex flex-col items-center">
                                <div id="step-circle-2"
                                    class="w-10 h-10 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center mb-2">
                                    2</div>
                                <span id="step-text-2" class="text-sm font-medium text-gray-500">재료 정보</span>
                            </div>
                            <div class="step-item flex flex-col items-center">
                                <div id="step-circle-3"
                                    class="w-10 h-10 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center mb-2">
                                    3</div>
                                <span id="step-text-3" class="text-sm font-medium text-gray-500">고정비 입력</span>
                            </div>
                            <div class="step-item flex flex-col items-center">
                                <div id="step-circle-4"
                                    class="w-10 h-10 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center mb-2">
                                    4</div>
                                <span id="step-text-4" class="text-sm font-medium text-gray-500">분석 결과</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-8 mb-8 min-h-[500px]">
                        <!-- Step 1: 상품 정보 입력 -->
                        <div id="step-1" class="step-content">
                            <h2 class="text-2xl font-bold text-gray-800 mb-6">상품 정보 입력</h2>
                            <p class="text-gray-600 mb-8">원가율 계산을 위한 기본 상품 정보를 입력해주세요.</p>
                            <div class="space-y-6 max-w-2xl">
                                <div class="form-group">
                                    <label for="product-name" class="block text-gray-700 font-medium mb-2">상품명</label>
                                    <input type="text" id="product-name"
                                        class="w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                        placeholder="예: 수제 초콜릿 쿠키">
                                </div>
                                <div class="form-group">
                                    <label for="selling-price" class="block text-gray-700 font-medium mb-2">판매 가격
                                        (원)</label>
                                    <input type="text" inputmode="numeric"
                                        onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                        oninput="this.value = this.value.replace(/[^0-9]/g, '')" id="selling-price"
                                        class="w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                        placeholder="예: 5000">
                                </div>
                                <div class="form-group">
                                    <label for="daily-production" class="block text-gray-700 font-medium mb-2">일일 예상 생산량
                                        (개)</label>
                                    <input type="text" inputmode="numeric"
                                        onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                        oninput="this.value = this.value.replace(/[^0-9]/g, '')" id="daily-production"
                                        class="w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                        placeholder="예: 100">
                                </div>
                            </div>
                        </div>
                        <!-- Step 2: 재료 정보 입력 -->
                        <div id="step-2" class="step-content hidden">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-2xl font-bold text-gray-800">재료 정보 입력</h2>
                                <button id="add-material-btn"
                                    class="bg-primary text-white px-4 py-2 rounded-button shadow hover:bg-blue-600 transition-all flex items-center gap-2 !rounded-button whitespace-nowrap">
                                    <div class="w-5 h-5 flex items-center justify-center">
                                        <i class="ri-add-line"></i>
                                    </div>
                                    <span>재료 추가</span>
                                </button>
                            </div>
                            <p class="text-gray-600 mb-8">상품 제작에 필요한 모든 재료 정보를 입력해주세요.</p>
                            <div id="materials-container" class="space-y-6">
                                <div class="material-item bg-gray-50 p-6 rounded-lg border border-gray-200">
                                    <div class="flex justify-between items-center mb-4">
                                        <h3 class="text-lg font-medium text-gray-800">재료 #1</h3>
                                        <button class="text-gray-500 hover:text-red-500 delete-material">
                                            <div class="w-6 h-6 flex items-center justify-center">
                                                <i class="ri-delete-bin-line"></i>
                                            </div>
                                        </button>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">재료명</label>
                                            <input type="text"
                                                class="material-name w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                                placeholder="예: 박력분">
                                        </div>
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">구매처 링크 (선택사항)</label>
                                            <input type="url"
                                                class="material-url w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                                placeholder="예: https://example.com/product">
                                        </div>
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">단위</label>
                                            <select
                                                class="material-unit w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent pr-8">
                                                <option value="g">g (그램)</option>
                                                <option value="ml">ml (밀리리터)</option>
                                                <option value="개">개 (개수)</option>
                                                <option value="kg">kg (킬로그램)</option>
                                                <option value="l">l (리터)</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">가격 (원)</label>
                                            <input type="text" inputmode="numeric"
                                                onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                                class="material-price w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                                placeholder="예: 3000">
                                        </div>
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">총 용량</label>
                                            <input type="text" inputmode="numeric"
                                                onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                                class="material-total-amount w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                                placeholder="예: 1000">
                                        </div>
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">사용량</label>
                                            <input type="text" inputmode="numeric"
                                                onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                                class="material-used-amount w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                                placeholder="예: 250">
                                        </div>
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">1단위당 가격 (원)</label>
                                            <input type="text"
                                                class="material-unit-price w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded"
                                                readonly>
                                        </div>
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">재료 원가 (원)</label>
                                            <input type="text"
                                                class="material-cost w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded"
                                                readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-8 p-6 bg-blue-50 rounded-lg">
                                <div class="flex justify-between items-center">
                                    <h3 class="text-lg font-medium text-gray-800">재료비 합계</h3>
                                    <span id="total-materials-cost" class="text-xl font-bold text-primary">0 원</span>
                                </div>
                            </div>
                        </div>
                        <!-- Step 3: 고정비 입력 -->
                        <div id="step-3" class="step-content hidden">
                            <h2 class="text-2xl font-bold text-gray-800 mb-6">고정비 입력</h2>
                            <p class="text-gray-600 mb-8">
                                상품 생산에 필요한 고정비를 입력해주세요.
                                해당 항목은 <strong>원가율 분석에 반영되며</strong>,
                                실제 수익 분석을 보다 정확하게 도와줍니다.
                            </p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                                    <h3 class="text-lg font-medium text-gray-800 mb-4">공간 비용</h3>
                                    <div class="space-y-4">
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">월 임대료 (원)</label>
                                            <input type="text" inputmode="numeric"
                                                onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                                oninput="this.value = this.value.replace(/[^0-9]/g, '')" id="rent-cost"
                                                class="w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                                placeholder="예: 1000000">
                                        </div>
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">월 관리비 (원)</label>
                                            <input type="text" inputmode="numeric"
                                                onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                                id="maintenance-cost"
                                                class="w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                                placeholder="예: 200000">
                                        </div>
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">일 영업일수</label>
                                            <input type="text" inputmode="numeric"
                                                onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                                id="business-days"
                                                class="w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                                placeholder="예: 22" value="22">
                                        </div>
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">일일 공간 비용 (원)</label>
                                            <input type="text" inputmode="numeric"
                                                onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                                id="daily-space-cost"
                                                class="w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded"
                                                readonly>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                                    <h3 class="text-lg font-medium text-gray-800 mb-4">포장/배송 비용</h3>
                                    <div class="space-y-4">
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">단위당 포장비 (원)</label>
                                            <input type="text" inputmode="numeric"
                                                onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                                id="packaging-cost"
                                                class="w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                                placeholder="예: 500">
                                        </div>
                                        <div class="form-group">
                                            <label class="block text-gray-700 font-medium mb-2">단위당 배송비 (원)</label>
                                            <input type="text" inputmode="numeric"
                                                onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                                id="shipping-cost"
                                                class="w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                                placeholder="예: 3000">
                                        </div>
                                        <div class="form-group flex items-center">
                                            <label class="custom-switch mr-3">
                                                <input type="checkbox" id="shipping-included">
                                                <span class="switch-slider"></span>
                                            </label>
                                            <span class="text-gray-700">배송비 별도 청구</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 mb-8">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-medium text-gray-800">기타 비용</h3>
                                    <button id="add-extra-cost-btn"
                                        class="text-primary hover:text-blue-700 flex items-center gap-1">
                                        <div class="w-5 h-5 flex items-center justify-center">
                                            <i class="ri-add-line"></i>
                                        </div>
                                        <span>항목 추가</span>
                                    </button>
                                </div>
                                <div id="extra-costs-container" class="space-y-4">
                                    <div class="extra-cost-item grid grid-cols-12 gap-4">
                                        <div class="col-span-5">
                                            <input type="text"
                                                class="extra-cost-name w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                                placeholder="항목명 (예: 인건비)">
                                        </div>
                                        <div class="col-span-5">
                                            <input type="text" inputmode="numeric"
                                                onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                                class="extra-cost-amount w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                                placeholder="금액 (원)">
                                        </div>
                                        <div class="col-span-2 flex items-center">
                                            <button class="text-gray-500 hover:text-red-500 delete-extra-cost">
                                                <div class="w-6 h-6 flex items-center justify-center">
                                                    <i class="ri-delete-bin-line"></i>
                                                </div>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="p-6 bg-blue-50 rounded-lg">
                                <div class="flex justify-between items-center">
                                    <h3 class="text-lg font-medium text-gray-800">일일 고정비 합계</h3>
                                    <span id="total-fixed-cost" class="text-xl font-bold text-primary">0 원</span>
                                </div>
                            </div>
                        </div>
                        <!-- Step 4: 분석 결과 -->
                        <div id="step-4" class="step-content hidden">
                            <div class="mb-6">
                                <h2 class="text-2xl font-bold text-gray-800">원가 분석 결과</h2>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                                <div
                                    class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm flex flex-col items-center justify-center">
                                    <h3 class="text-lg font-medium text-gray-600 mb-2">원가율</h3>
                                    <div class="text-4xl font-bold text-primary" id="cost-ratio">0%</div>
                                    <div class="text-sm text-gray-500 mt-2">판매가 대비 원가 비율</div>
                                </div>
                                <div
                                    class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm flex flex-col items-center justify-center">
                                    <h3 class="text-lg font-medium text-gray-600 mb-2">단위당 순이익</h3>
                                    <div class="text-4xl font-bold text-green-600" id="unit-profit">0원</div>
                                    <div class="text-sm text-gray-500 mt-2">판매가 - 총 원가</div>
                                </div>
                                <div
                                    class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm flex flex-col items-center justify-center">
                                    <h3 class="text-lg font-medium text-gray-600 mb-2">일일 예상 수익</h3>
                                    <div class="text-4xl font-bold text-blue-600" id="daily-profit">0원</div>
                                    <div class="text-sm text-gray-500 mt-2">단위당 순이익 × 일일 생산량</div>
                                </div>
                            </div>
                            <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm mb-8">
                                <h3 class="text-lg font-medium text-gray-800 mb-4">가게 운영에 꼭 필요한 원가율 기준, 쉽게 정리했어요!</h3>
                                <div class="prose max-w-none">
                                    <section style="max-width: 800px; margin: 0 auto; font-family: sans-serif;">
                                        <h2 style="font-size: 24px; font-weight: bold; margin-bottom: 16px;">업종별 일반적인 원가율 기준 (외식업 중심)</h2>
                                        
                                        <table style="width: 100%; border-collapse: collapse; text-align: center;">
                                          <thead>
                                            <tr style="background-color: #f2f2f2;">
                                              <th style="padding: 12px; border: 1px solid #ccc;">업종 유형</th>
                                              <th style="padding: 12px; border: 1px solid #ccc;">적정 원가율</th>
                                              <th style="padding: 12px; border: 1px solid #ccc;">주의 원가율</th>
                                              <th style="padding: 12px; border: 1px solid #ccc;">위험 원가율</th>
                                            </tr>
                                          </thead>
                                          <tbody>
                                            <tr>
                                              <td style="padding: 12px; border: 1px solid #ccc;">일반 식당 (한식/중식/분식)</td>
                                              <td style="padding: 12px; border: 1px solid #ccc;">30% ~ 35%</td>
                                              <td style="padding: 12px; border: 1px solid #ccc;">36% ~ 45%</td>
                                              <td style="padding: 12px; border: 1px solid #ccc;">46% 이상</td>
                                            </tr>
                                            <tr>
                                              <td style="padding: 12px; border: 1px solid #ccc;">카페 / 디저트 매장</td>
                                              <td style="padding: 12px; border: 1px solid #ccc;">25% ~ 30%</td>
                                              <td style="padding: 12px; border: 1px solid #ccc;">31% ~ 40%</td>
                                              <td style="padding: 12px; border: 1px solid #ccc;">41% 이상</td>
                                            </tr>
                                            <tr>
                                              <td style="padding: 12px; border: 1px solid #ccc;">고급 레스토랑</td>
                                              <td style="padding: 12px; border: 1px solid #ccc;">35% ~ 40%</td>
                                              <td style="padding: 12px; border: 1px solid #ccc;">41% ~ 50%</td>
                                              <td style="padding: 12px; border: 1px solid #ccc;">51% 이상</td>
                                            </tr>
                                            <tr>
                                              <td style="padding: 12px; border: 1px solid #ccc;">프랜차이즈 권장 기준</td>
                                              <td style="padding: 12px; border: 1px solid #ccc;">28% ~ 32%</td>
                                              <td style="padding: 12px; border: 1px solid #ccc;">33% ~ 40%</td>
                                              <td style="padding: 12px; border: 1px solid #ccc;">41% 이상</td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </section>
                                    </p>
                                </div>
                            </div>
                            <div class="bg-blue-50 p-6 rounded-lg">
                                <h3 class="text-lg font-medium text-gray-800 mb-4">원가 세부 내역</h3>
                                <div class="overflow-x-auto">
                                    <table class="min-w-full bg-white">
                                        <thead>
                                            <tr class="bg-gray-100">
                                                <th class="py-3 px-4 text-left text-gray-700 font-medium">항목</th>
                                                <th class="py-3 px-4 text-right text-gray-700 font-medium">단위 비용 (원)
                                                </th>
                                                <th class="py-3 px-4 text-right text-gray-700 font-medium">비율 (%)</th>
                                            </tr>
                                        </thead>
                                        <tbody id="cost-breakdown-table">
                                            </tr>
                                            <tr class="bg-blue-50">
                                                <td class="py-3 px-4 font-medium text-gray-800">총 원가</td>
                                                <td class="py-3 px-4 text-right font-medium text-gray-800">1,625</td>
                                                <td class="py-3 px-4 text-right font-medium text-gray-800">100%</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-between mt-8">
                        <button id="prev-btn"
                            class="bg-white text-gray-700 px-6 py-3 rounded-button shadow-sm border border-gray-200 hover:bg-gray-50 transition-all hidden !rounded-button whitespace-nowrap">이전
                            단계</button>
                        <button id="next-btn"
                            class="bg-primary text-white px-6 py-3 rounded-button shadow hover:bg-blue-600 transition-all ml-auto !rounded-button whitespace-nowrap">다음
                            단계</button>
                        <button id="recalculate-btn"
                            class="bg-primary text-white px-6 py-3 rounded-button shadow hover:bg-blue-600 transition-all hidden !rounded-button whitespace-nowrap">다시
                            계산하기</button>
                    </div>
                </div>
            </div>
                        <!-- 테이블 회전 매출 계산기 -->
                        <div id="calculator-table" class="calculator-section hidden">
                            <div class="bg-white p-8 rounded shadow mt-8">
                                <h2 class="text-2xl font-bold text-gray-800 mb-6">테이블 회전 매출 계산기</h2>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 max-w-3xl">
                                    <div>
                                        <label class="block mb-1 font-semibold">현재 테이블 수</label>
                                        <input id="current-tables" type="text" inputmode="numeric"
                                            onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                            oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                            class="w-full px-4 py-2 border border-gray-300 rounded" placeholder="예: 10">
                                    </div>
                                    <div>
                                        <label class="block mb-1 font-semibold">현재 객단가 (원)</label>
                                        <input id="current-price" type="text" inputmode="numeric"
                                            onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                            oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                            class="w-full px-4 py-2 border border-gray-300 rounded" placeholder="예: 8000">
                                    </div>
                                    <div>
                                        <label class="block mb-1 font-semibold">회전율 (시간당)</label>
                                        <input id="current-turnover" type="text" inputmode="decimal"
                                            onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete','.'].includes(event.key);"
                                            oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                            class="w-full px-4 py-2 border border-gray-300 rounded" placeholder="예: 1.5">
                                    </div>
                                </div>
                                <div class="mt-6">
                                    <button onclick="calculateTableRevenue()"
                                        class="bg-primary text-white px-6 py-2 rounded-button">기존 매출 계산</button>
                                </div>
            
                                <div id="table-revenue-result" class="mt-6 text-xl font-bold text-primary"></div>
            
                                <hr class="my-6">
                                <h3 class="text-xl font-semibold text-gray-800 mb-4">변경 후 수익 시뮬레이션</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 max-w-3xl">
                                    <div>
                                        <label class="block mb-1 font-semibold">테이블 수 (변경)</label>
                                        <input id="new-tables" type="text" inputmode="numeric"
                                            onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                            oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                            class="w-full px-4 py-2 border border-gray-300 rounded" placeholder="예: 12">
                                    </div>
                                    <div>
                                        <label class="block mb-1 font-semibold">객단가 (변경)</label>
                                        <input id="new-price" type="text" inputmode="numeric"
                                            onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                            oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                            class="w-full px-4 py-2 border border-gray-300 rounded" placeholder="예: 10000">
                                    </div>
                                    <div>
                                        <label class="block mb-1 font-semibold">회전율 (변경)</label>
                                        <input id="new-turnover" type="text" inputmode="decimal"
                                            onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete','.'].includes(event.key);"
                                            oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                            class="w-full px-4 py-2 border border-gray-300 rounded" placeholder="예: 2.0">
                                    </div>
                                </div>
                                <div class="mt-6">
                                    <button onclick="calculateNewRevenue()"
                                        class="bg-primary text-white px-6 py-2 rounded-button">변경 후 매출 계산</button>
                                </div>
                                <div id="new-revenue-result" class="mt-6 text-xl font-bold text-green-600"></div>
                                <div id="revenue-difference" class="mt-2 text-gray-700"></div>
            
                                <hr class="my-6">
                                <h3 class="text-xl font-semibold text-gray-800 mb-4">목표 매출 기준 객단가 계산</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 max-w-3xl">
                                    <div>
                                        <label class="block mb-1 font-semibold">목표 매출 (원)</label>
                                        <input id="goal-revenue" type="text" inputmode="numeric"
                                            onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                            oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                            class="w-full px-4 py-2 border border-gray-300 rounded" placeholder="예: 200000">
                                    </div>
                                    <div>
                                        <label class="block mb-1 font-semibold">테이블 수</label>
                                        <input id="goal-tables" type="text" inputmode="numeric"
                                            onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                            oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                            class="w-full px-4 py-2 border border-gray-300 rounded" placeholder="예: 12">
                                    </div>
                                    <div>
                                        <label class="block mb-1 font-semibold">회전율</label>
                                        <input id="goal-turnover" type="text" inputmode="decimal"
                                            onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete','.'].includes(event.key);"
                                            oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                            class="w-full px-4 py-2 border border-gray-300 rounded" placeholder="예: 1.8">
                                    </div>
                                </div>
                                <div class="mt-6">
                                    <button onclick="calculateRequiredUnitPrice()"
                                        class="bg-primary text-white px-6 py-2 rounded-button">객단가 계산</button>
                                </div>
                                <div id="required-unit-result" class="mt-6 text-lg font-bold text-blue-600"></div>
                            </div>
                        </div>
            
                </body>
            
                <div id="calculator-goal" class="calculator-section hidden">
                    <div class="bg-white p-8 rounded shadow mt-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-6">손익 계산기</h2>
            
                        <!-- 매출 입력 -->
                        <div class="mb-6">
                            <label class="block text-gray-700 font-medium mb-2">월 매출액 (원)</label>
                            <input type="text" inputmode="numeric"
                                onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                oninput="this.value = this.value.replace(/[^0-9]/g, '')" id="monthly-sales"
                                class="w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                placeholder="예: 20000000">
                        </div>
            
                        <!-- 변동비 입력 -->
                        <div class="mb-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-medium text-gray-800">변동비 (%)</h3>
                                <button id="add-variable-cost-btn" class="text-primary hover:text-blue-700 flex items-center gap-1">
                                    <div class="w-5 h-5 flex items-center justify-center">
                                        <i class="ri-add-line"></i>
                                    </div>
                                    <span>항목 추가</span>
                                </button>
                            </div>
                            <div id="variable-costs-container" class="space-y-3">
                                <div class="variable-cost-item grid grid-cols-12 gap-4">
                                    <div class="col-span-6">
                                        <input type="text"
                                            class="variable-cost-name w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                            placeholder="항목명 (예: 재료비)">
                                    </div>
                                    <div class="col-span-5">
                                        <input type="text" inputmode="numeric"
                                            onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete','.'].includes(event.key);"
                                            oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                            class="variable-cost-percent w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                            placeholder="비율 1~100 사이 (예: 30)">
                                    </div>
                                    <div class="col-span-1 flex items-center">
                                        <button class="text-gray-500 hover:text-red-500 delete-variable-cost">
                                            <div class="w-6 h-6 flex items-center justify-center">
                                                <i class="ri-delete-bin-line"></i>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
            
                        <!-- 고정비 입력 -->
                        <div class="mb-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-medium text-gray-800">고정비 (원)</h3>
                                <button id="add-fixed-cost-btn" class="text-primary hover:text-blue-700 flex items-center gap-1">
                                    <div class="w-5 h-5 flex items-center justify-center">
                                        <i class="ri-add-line"></i>
                                    </div>
                                    <span>항목 추가</span>
                                </button>
                            </div>
                            <div id="fixed-costs-container" class="space-y-3">
                                <div class="fixed-cost-item grid grid-cols-12 gap-4">
                                    <div class="col-span-6">
                                        <input type="text"
                                            class="fixed-cost-name w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                            placeholder="항목명 (예: 임대료)">
                                    </div>
                                    <div class="col-span-5">
                                        <input type="text" inputmode="numeric"
                                            onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);"
                                            oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                            class="fixed-cost-amount w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                            placeholder="금액 (예: 1000000)">
                                    </div>
                                    <div class="col-span-1 flex items-center">
                                        <button class="text-gray-500 hover:text-red-500 delete-fixed-cost">
                                            <div class="w-6 h-6 flex items-center justify-center">
                                                <i class="ri-delete-bin-line"></i>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
            
                        <!-- 계산 버튼 -->
                        <div class="text-center mb-6">
                            <button onclick="calculateProfit()"
                                class="bg-primary text-white px-6 py-3 rounded-button hover:bg-blue-600 transition-all">계산하기</button>
                        </div>
            
                        <!-- 결과 출력 -->
                        <div id="profit-result" class="bg-blue-50 p-6 rounded-lg hidden">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                                <div
                                    class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm flex flex-col items-center justify-center">
                                    <h3 class="text-lg font-medium text-gray-600 mb-2">총 변동비</h3>
                                    <div class="text-2xl font-bold text-primary" id="var-cost-total">0원</div>
                                </div>
                                <div
                                    class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm flex flex-col items-center justify-center">
                                    <h3 class="text-lg font-medium text-gray-600 mb-2">총 고정비</h3>
                                    <div class="text-2xl font-bold text-primary" id="fixed-cost-total">0원</div>
                                </div>
                                <div
                                    class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm flex flex-col items-center justify-center">
                                    <h3 class="text-lg font-medium text-gray-600 mb-2">순이익</h3>
                                    <div class="text-2xl font-bold text-green-600" id="net-profit">0원</div>
                                    <div class="text-sm text-gray-500 mt-2">순이익률: <span id="profit-rate">0</span>%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


    <script>
document.addEventListener('DOMContentLoaded', function () {
    const tabs = document.querySelectorAll('.calculator-tab');
    const sections = document.querySelectorAll('.calculator-section');

    tabs.forEach(tab => {
        tab.addEventListener('click', function () {
            // 탭 스타일 초기화
            tabs.forEach(t => t.classList.remove('active-tab', 'text-primary', 'border-b-2', 'border-primary'));
            this.classList.add('active-tab', 'text-primary', 'border-b-2', 'border-primary');

            // 대상 계산기 보여주기
            const targetId = this.getAttribute('data-target');
            sections.forEach(section => {
                if (section.id === targetId) {
                    section.classList.remove('hidden');
                    section.classList.add('block');
                } else {
                    section.classList.remove('block');
                    section.classList.add('hidden');
                }
            });
        });
    });
});
// 메인 탭 표시 함수
function showMainTab() {
    const sections = document.querySelectorAll('.calculator-section');
    
    // 모든 섹션 숨기기
    sections.forEach(section => {
        section.classList.remove('block');
        section.classList.add('hidden');
    });
    
    // 메인 섹션만 표시
    const mainSection = document.getElementById('main');
    if (mainSection) {
        mainSection.classList.remove('hidden');
        mainSection.classList.add('block');
    }
}


        document.addEventListener('DOMContentLoaded', function () {
            // 현재 단계
            let currentStep = 1;
            const totalSteps = 4;
            // 버튼 요소
            const nextBtn = document.getElementById('next-btn');
            const prevBtn = document.getElementById('prev-btn');
            const recalculateBtn = document.getElementById('recalculate-btn');
            // 단계 컨텐츠
            const stepContents = document.querySelectorAll('.step-content');
            // 단계 표시기 업데이트 함수
            function updateStepIndicator(step) {
                document.getElementById('step-progress').style.width = ((step - 1) / (totalSteps - 1) * 100) + '%';
                for (let i = 1; i <= totalSteps; i++) {
                    const circle = document.getElementById(`step-circle-${i}`);
                    const text = document.getElementById(`step-text-${i}`);
                    if (i < step) {
                        circle.classList.remove('bg-gray-200', 'text-gray-600');
                        circle.classList.add('bg-primary', 'text-white');
                        text.classList.remove('text-gray-500');
                        text.classList.add('text-primary');
                    } else if (i === step) {
                        circle.classList.remove('bg-gray-200', 'text-gray-600');
                        circle.classList.add('bg-primary', 'text-white');
                        text.classList.remove('text-gray-500');
                        text.classList.add('text-primary');
                    } else {
                        circle.classList.remove('bg-primary', 'text-white');
                        circle.classList.add('bg-gray-200', 'text-gray-600');
                        text.classList.remove('text-primary');
                        text.classList.add('text-gray-500');
                    }
                }
            }
            // 단계 변경 함수
            function changeStep(step) {
                // 현재 단계 숨기기
                stepContents[currentStep - 1].classList.add('hidden');
                // 새 단계 표시
                currentStep = step;
                stepContents[currentStep - 1].classList.remove('hidden');
                // 단계 표시기 업데이트
                updateStepIndicator(currentStep);
                // 버튼 상태 업데이트
                if (currentStep === 1) {
                    prevBtn.classList.add('hidden');
                } else if (currentStep === totalSteps) {
                    nextBtn.classList.add('hidden');
                    prevBtn.classList.add('hidden');
                    recalculateBtn.classList.remove('hidden');
                    // 차트 렌더링
                    renderCostChart();
                    renderProfitChart();
                } else {
                    nextBtn.classList.remove('hidden');
                    prevBtn.classList.remove('hidden');
                    recalculateBtn.classList.add('hidden');
                }
            }
            // 다음 버튼 클릭 이벤트
            nextBtn.addEventListener('click', function () {
                if (currentStep < totalSteps) {
                    changeStep(currentStep + 1);
                }
            });
            // 이전 버튼 클릭 이벤트
            prevBtn.addEventListener('click', function () {
                if (currentStep > 1) {
                    changeStep(currentStep - 1);
                }
            });
            // 다시 계산하기 버튼 클릭 이벤트
            recalculateBtn.addEventListener('click', function () {
                // Reset all input values
                document.getElementById('product-name').value = '';
                document.getElementById('selling-price').value = '';
                document.getElementById('daily-production').value = '';
                // Reset material inputs
                document.querySelectorAll('.material-item').forEach((item, index) => {
                    if (index === 0) {
                        // Reset first material item
                        // Reset first material item
                        item.querySelector('.material-name').value = '';
                        item.querySelector('.material-url').value = '';
                        item.querySelector('.material-price').value = '';
                        item.querySelector('.material-total-amount').value = '';
                        item.querySelector('.material-used-amount').value = '';
                        item.querySelector('.material-unit-price').value = '';
                        item.querySelector('.material-cost').value = '';
                    } else {
                        // Remove additional material items
                        item.remove();
                    }
                });
                // Reset cost breakdown table to initial example data
                const costBreakdownTable = document.getElementById('cost-breakdown-table');
                costBreakdownTable.innerHTML = `
<tr>
<td class="py-3 px-4 text-gray-700 border-b">재료비 (박력분)</td>
<td class="py-3 px-4 text-right text-gray-700 border-b">250</td>
<td class="py-3 px-4 text-right text-gray-700 border-b">15.4%</td>
</tr>
<tr>
<td class="py-3 px-4 text-gray-700 border-b">재료비 (버터)</td>
<td class="py-3 px-4 text-right text-gray-700 border-b">450</td>
<td class="py-3 px-4 text-right text-gray-700 border-b">27.7%</td>
</tr>
<tr>
<td class="py-3 px-4 text-gray-700 border-b">재료비 (설탕)</td>
<td class="py-3 px-4 text-right text-gray-700 border-b">175</td>
<td class="py-3 px-4 text-right text-gray-700 border-b">10.8%</td>
</tr>
<tr>
<td class="py-3 px-4 text-gray-700 border-b">재료비 (초콜릿)</td>
<td class="py-3 px-4 text-right text-gray-700 border-b">300</td>
<td class="py-3 px-4 text-right text-gray-700 border-b">18.5%</td>
</tr>
<tr>
<td class="py-3 px-4 text-gray-700 border-b">재료비(포장)</td>
<td class="py-3 px-4 text-right text-gray-700 border-b">500</td>
<td class="py-3 px-4 text-right text-gray-700 border-b">30.8%</td>
</tr>
<tr>
<td class="py-3 px-4 text-gray-700 border-b">재료비(기름)</td>
<td class="py-3 px-4 text-right text-gray-700 border-b">50</td>
<td class="py-3 px-4 text-right text-gray-700 border-b">3.1%</td>
</tr>
<tr class="bg-blue-50">
<td class="py-3 px-4 font-medium text-gray-800">총 원가</td>
<td class="py-3 px-4 text-right font-medium text-gray-800">1,625</td>
<td class="py-3 px-4 text-right font-medium text-gray-800">100%</td>
</tr>
`;
                // Reset fixed cost inputs
                document.getElementById('rent-cost').value = '';
                document.getElementById('maintenance-cost').value = '';
                document.getElementById('business-days').value = '22';
                document.getElementById('daily-space-cost').value = '';
                document.getElementById('packaging-cost').value = '';
                document.getElementById('shipping-cost').value = '';
                document.getElementById('shipping-included').checked = false;
                // Reset extra cost items
                const extraCostsContainer = document.getElementById('extra-costs-container');
                const extraCostItems = extraCostsContainer.querySelectorAll('.extra-cost-item');
                extraCostItems.forEach((item, index) => {
                    if (index === 0) {
                        // Reset first extra cost item
                        item.querySelector('.extra-cost-name').value = '';
                        item.querySelector('.extra-cost-amount').value = '';
                    } else {
                        // Remove additional extra cost items
                        item.remove();
                    }
                });
                // Reset totals
                document.getElementById('total-materials-cost').textContent = '0 원';
                document.getElementById('total-fixed-cost').textContent = '0 원';
                document.getElementById('cost-ratio').textContent = '0%';
                document.getElementById('unit-profit').textContent = '0원';
                document.getElementById('daily-profit').textContent = '0원';
                // Go back to step 1
                changeStep(1);
                // Reset step indicator
                updateStepIndicator(1);
                // Show next button and hide recalculate button
                nextBtn.classList.remove('hidden');
                recalculateBtn.classList.add('hidden');
            });
            // 재료 추가 버튼 클릭 이벤트
            document.getElementById('add-material-btn').addEventListener('click', function () {
                const materialsContainer = document.getElementById('materials-container');
                const materialItems = materialsContainer.querySelectorAll('.material-item');
                const newIndex = materialItems.length + 1;
                const newMaterialItem = document.createElement('div');
                newMaterialItem.className = 'material-item bg-gray-50 p-6 rounded-lg border border-gray-200';
                newMaterialItem.innerHTML = `
<div class="flex justify-between items-center mb-4">
<h3 class="text-lg font-medium text-gray-800">재료 #${newIndex}</h3>
<button class="text-gray-500 hover:text-red-500 delete-material">
<div class="w-6 h-6 flex items-center justify-center">
<i class="ri-delete-bin-line"></i>
</div>
</button>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
<div class="form-group">
<label class="block text-gray-700 font-medium mb-2">재료명</label>
<input type="text" class="material-name w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="예: 박력분">
</div>
<div class="form-group">
<label class="block text-gray-700 font-medium mb-2">구매처 링크 (선택사항)</label>
<input type="url" class="material-url w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="예: https://example.com/product">
</div>
<div class="form-group">
<label class="block text-gray-700 font-medium mb-2">단위</label>
<select class="material-unit w-full px-4 py-3 border border-gray-300 rounded bg-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent appearance-none">
<option value="g">g (그램)</option>
<option value="ml">ml (밀리리터)</option>
<option value="개">개 (개수)</option>
<option value="kg">kg (킬로그램)</option>
<option value="l">l (리터)</option>
</select>
</div>
<div class="form-group">
<label class="block text-gray-700 font-medium mb-2">가격 (원)</label>
<input type="text" inputmode="numeric" onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);" oninput="this.value = this.value.replace(/[^0-9]/g, '')" class="material-price w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="예: 3000">
</div>
<div class="form-group">
<label class="block text-gray-700 font-medium mb-2">총 용량</label>
<input type="text" inputmode="numeric" onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);" oninput="this.value = this.value.replace(/[^0-9]/g, '')" class="material-total-amount w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="예: 1000">
</div>
<div class="form-group">
<label class="block text-gray-700 font-medium mb-2">사용량</label>
<input type="text" inputmode="numeric" onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);" oninput="this.value = this.value.replace(/[^0-9]/g, '')" class="material-used-amount w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="예: 250">
</div>
<div class="form-group">
<label class="block text-gray-700 font-medium mb-2">1단위당 가격 (원)</label>
<input type="text" class="material-unit-price w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded" readonly>
</div>
<div class="form-group">
<label class="block text-gray-700 font-medium mb-2">재료 원가 (원)</label>
<input type="text" class="material-cost w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded" readonly>
</div>
</div>
`;
                materialsContainer.appendChild(newMaterialItem);
                // 삭제 버튼 이벤트 추가
                newMaterialItem.querySelector('.delete-material').addEventListener('click', function () {
                    materialsContainer.removeChild(newMaterialItem);
                    updateMaterialNumbers();
                    calculateMaterialsCost();
                });
                // 재료 계산 이벤트 추가
                const priceInput = newMaterialItem.querySelector('.material-price');
                const totalAmountInput = newMaterialItem.querySelector('.material-total-amount');
                const usedAmountInput = newMaterialItem.querySelector('.material-used-amount');
                [priceInput, totalAmountInput, usedAmountInput].forEach(input => {
                    input.addEventListener('input', function () {
                        calculateMaterialUnitPrice(newMaterialItem);
                        calculateMaterialsCost();
                    });
                });
            });
            // 기존 재료 삭제 버튼 이벤트
            document.querySelectorAll('.delete-material').forEach(button => {
                button.addEventListener('click', function () {
                    const materialItem = this.closest('.material-item');
                    const materialsContainer = document.getElementById('materials-container');
                    if (materialsContainer.querySelectorAll('.material-item').length > 1) {
                        materialsContainer.removeChild(materialItem);
                        updateMaterialNumbers();
                        calculateMaterialsCost();
                    } else {
                        alert('최소 하나의 재료는 필요합니다.');
                    }
                });
            });
            // 재료 번호 업데이트 함수
            function updateMaterialNumbers() {
                const materialItems = document.querySelectorAll('.material-item');
                materialItems.forEach((item, index) => {
                    item.querySelector('h3').textContent = `재료 #${index + 1}`;
                });
            }
            // 재료 단위 가격 계산 함수
            function calculateMaterialUnitPrice(materialItem) {
                const price = parseFloat(materialItem.querySelector('.material-price').value) || 0;
                const totalAmount = parseFloat(materialItem.querySelector('.material-total-amount').value) || 0;
                const usedAmount = parseFloat(materialItem.querySelector('.material-used-amount').value) || 0;
                let unitPrice = 0;
                let materialCost = 0;
                if (totalAmount > 0) {
                    unitPrice = price / totalAmount;
                    materialCost = unitPrice * usedAmount;
                }
                materialItem.querySelector('.material-unit-price').value = unitPrice.toFixed(2) + ' 원';
                materialItem.querySelector('.material-cost').value = materialCost.toFixed(0) + ' 원';
            }
            // 재료비 합계 계산 함수
            function calculateMaterialsCost() {
                const materialItems = document.querySelectorAll('.material-item');
                let totalCost = 0;
                materialItems.forEach(item => {
                    const costText = item.querySelector('.material-cost').value;
                    const cost = parseFloat(costText.replace(' 원', '')) || 0;
                    totalCost += cost;
                });
                document.getElementById('total-materials-cost').textContent = totalCost.toLocaleString() + ' 원';
            }
            // 기존 재료 계산 이벤트 추가
            document.querySelectorAll('.material-item').forEach(item => {
                const priceInput = item.querySelector('.material-price');
                const totalAmountInput = item.querySelector('.material-total-amount');
                const usedAmountInput = item.querySelector('.material-used-amount');
                [priceInput, totalAmountInput, usedAmountInput].forEach(input => {
                    input.addEventListener('input', function () {
                        calculateMaterialUnitPrice(item);
                        calculateMaterialsCost();
                    });
                });
            });
            // 고정비 계산 함수
            function calculateFixedCost() {
                const rentCost = parseFloat(document.getElementById('rent-cost').value) || 0;
                const maintenanceCost = parseFloat(document.getElementById('maintenance-cost').value) || 0;
                const businessDays = parseFloat(document.getElementById('business-days').value) || 22;
                const dailySpaceCost = (rentCost + maintenanceCost) / businessDays;
                document.getElementById('daily-space-cost').value = dailySpaceCost.toLocaleString() + ' 원';
                // 기타 비용 계산
                const extraCostItems = document.querySelectorAll('.extra-cost-item');
                let totalExtraCost = 0;
                extraCostItems.forEach(item => {
                    const amount = parseFloat(item.querySelector('.extra-cost-amount').value) || 0;
                    totalExtraCost += amount;
                });
                // 포장/배송비 계산
                const packagingCost = parseFloat(document.getElementById('packaging-cost').value) || 0;
                const shippingCost = parseFloat(document.getElementById('shipping-cost').value) || 0;
                const shippingIncluded = document.getElementById('shipping-included').checked;
                const totalPackagingCost = packagingCost;
                const totalShippingCost = shippingIncluded ? 0 : shippingCost;
                const totalFixedCost = dailySpaceCost + totalExtraCost + totalPackagingCost + totalShippingCost;
                document.getElementById('total-fixed-cost').textContent = totalFixedCost.toLocaleString() + ' 원';
                // 재료비를 포함한 원가와 수익 계산
                calculateTotalCosts();
            }
            // 고정비 입력 이벤트
            ['rent-cost', 'maintenance-cost', 'business-days', 'packaging-cost', 'shipping-cost'].forEach(id => {
                document.getElementById(id).addEventListener('input', calculateFixedCost);
            });
            document.getElementById('shipping-included').addEventListener('change', calculateFixedCost);
            // 기타 비용 추가 버튼 클릭 이벤트
            document.getElementById('add-extra-cost-btn').addEventListener('click', function () {
                const extraCostsContainer = document.getElementById('extra-costs-container');
                const newExtraCostItem = document.createElement('div');
                newExtraCostItem.className = 'extra-cost-item grid grid-cols-12 gap-4';
                newExtraCostItem.innerHTML = `
<div class="col-span-5">
<input type="text" class="extra-cost-name w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="항목명 (예: 인건비)">
</div>
<div class="col-span-5">
<input type="text" inputmode="numeric" onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);" oninput="this.value = this.value.replace(/[^0-9]/g, '')" class="extra-cost-amount w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="금액 (원)">
</div>
<div class="col-span-2 flex items-center">
<button class="text-gray-500 hover:text-red-500 delete-extra-cost">
<div class="w-6 h-6 flex items-center justify-center">
<i class="ri-delete-bin-line"></i>
</div>
</button>
</div>
`;
                extraCostsContainer.appendChild(newExtraCostItem);
                // 삭제 버튼 이벤트 추가
                newExtraCostItem.querySelector('.delete-extra-cost').addEventListener('click', function () {
                    extraCostsContainer.removeChild(newExtraCostItem);
                    calculateFixedCost();
                });
                // 금액 입력 이벤트 추가
                newExtraCostItem.querySelector('.extra-cost-amount').addEventListener('input', calculateFixedCost);
            });
            // 기존 기타 비용 삭제 버튼 이벤트
            document.querySelectorAll('.delete-extra-cost').forEach(button => {
                button.addEventListener('click', function () {
                    const extraCostItem = this.closest('.extra-cost-item');
                    const extraCostsContainer = document.getElementById('extra-costs-container');
                    extraCostsContainer.removeChild(extraCostItem);
                    calculateFixedCost();
                });
            });
            // 기존 기타 비용 금액 입력 이벤트
            document.querySelectorAll('.extra-cost-amount').forEach(input => {
                input.addEventListener('input', calculateFixedCost);
            });
            // 원가 차트 렌더링 함수
            function renderCostChart() {
                const chartDom = document.getElementById('cost-chart');
                const myChart = echarts.init(chartDom);
                const option = {
                    animation: false,
                    tooltip: {
                        trigger: 'item',
                        backgroundColor: 'rgba(255, 255, 255, 0.8)',
                        borderColor: '#E5E7EB',
                        textStyle: {
                            color: '#1f2937'
                        }
                    },
                    legend: {
                        bottom: '0',
                        left: 'center',
                        textStyle: {
                            color: '#1f2937'
                        }
                    },
                    series: [
                        {
                            name: '원가 구성',
                            type: 'pie',
                            radius: ['40%', '70%'],
                            avoidLabelOverlap: false,
                            itemStyle: {
                                borderRadius: 8,
                                borderColor: '#fff',
                                borderWidth: 2
                            },
                            label: {
                                show: false,
                                position: 'center'
                            },
                            emphasis: {
                                label: {
                                    show: true,
                                    fontSize: '16',
                                    fontWeight: 'bold',
                                    color: '#1f2937'
                                }
                            },
                            labelLine: {
                                show: false
                            },
                            data: [
                                { value: 1175, name: '재료비', itemStyle: { color: 'rgba(87, 181, 231, 1)' } },
                                { value: 500, name: '포장비', itemStyle: { color: 'rgba(141, 211, 199, 1)' } },
                                { value: 50, name: '공간 비용', itemStyle: { color: 'rgba(251, 191, 114, 1)' } },
                                { value: 0, name: '기타 비용', itemStyle: { color: 'rgba(252, 141, 98, 1)' } }
                            ]
                        }
                    ]
                };
                myChart.setOption(option);
                window.addEventListener('resize', function () {
                    myChart.resize();
                });
            }
            // 수익 차트 렌더링 함수
            function renderProfitChart() {
                const chartDom = document.getElementById('profit-chart');
                const myChart = echarts.init(chartDom);
                const option = {
                    animation: false,
                    tooltip: {
                        trigger: 'axis',
                        backgroundColor: 'rgba(255, 255, 255, 0.8)',
                        borderColor: '#E5E7EB',
                        textStyle: {
                            color: '#1f2937'
                        }
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '10%',
                        top: '10%',
                        containLabel: true
                    },
                    xAxis: {
                        type: 'category',
                        boundaryGap: false,
                        data: ['50개', '75개', '100개', '125개', '150개', '175개', '200개'],
                        axisLine: {
                            lineStyle: {
                                color: '#E5E7EB'
                            }
                        },
                        axisLabel: {
                            color: '#1f2937'
                        }
                    },
                    yAxis: {
                        type: 'value',
                        axisLine: {
                            show: true,
                            lineStyle: {
                                color: '#E5E7EB'
                            }
                        },
                        axisLabel: {
                            color: '#1f2937',
                            formatter: '{value} 만원'
                        },
                        splitLine: {
                            lineStyle: {
                                color: '#F3F4F6'
                            }
                        }
                    },
                    series: [
                        {
                            name: '일일 수익',
                            type: 'line',
                            smooth: true,
                            lineStyle: {
                                width: 3,
                                color: 'rgba(87, 181, 231, 1)'
                            },
                            areaStyle: {
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                    {
                                        offset: 0,
                                        color: 'rgba(87, 181, 231, 0.3)'
                                    },
                                    {
                                        offset: 1,
                                        color: 'rgba(87, 181, 231, 0.1)'
                                    }
                                ])
                            },
                            emphasis: {
                                focus: 'series'
                            },
                            data: [12.5, 22.5, 33.8, 45.0, 56.3, 67.5, 78.8]
                        },
                        {
                            name: '원가',
                            type: 'line',
                            smooth: true,
                            lineStyle: {
                                width: 3,
                                color: 'rgba(251, 191, 114, 1)'
                            },
                            areaStyle: {
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                    {
                                        offset: 0,
                                        color: 'rgba(251, 191, 114, 0.3)'
                                    },
                                    {
                                        offset: 1,
                                        color: 'rgba(251, 191, 114, 0.1)'
                                    }
                                ])
                            },
                            emphasis: {
                                focus: 'series'
                            },
                            data: [8.8, 12.5, 16.3, 20.0, 23.8, 27.5, 31.3]
                        }
                    ]
                };
                myChart.setOption(option);
                window.addEventListener('resize', function () {
                    myChart.resize();
                });
            }
            // 계산 함수 정의
            function calculateTotalCosts() {
                // 판매가와 생산량
                const sellingPrice = parseFloat(document.getElementById('selling-price').value) || 0;
                const dailyProduction = parseFloat(document.getElementById('daily-production').value) || 0;

                // 재료비 계산
                let totalMaterialCost = 0;
                document.querySelectorAll('.material-item').forEach(item => {
                    const costText = item.querySelector('.material-cost').value;
                    const cost = parseFloat(costText.replace(' 원', '')) || 0;
                    totalMaterialCost += cost;
                });

                // 고정비 계산 추가
                const fixedCostText = document.getElementById('total-fixed-cost').textContent.replace(' 원', '').replace(/,/g, '');
                const totalFixedCost = parseFloat(fixedCostText) || 0;
                const totalCost = totalMaterialCost + totalFixedCost;

                // 원가율 계산 (재료비 + 고정비 고려)
                const costPerUnit = dailyProduction > 0 ? totalCost / dailyProduction : 0;
                const costRatio = sellingPrice > 0 ? (costPerUnit / sellingPrice * 100) : 0;

                // 수익 계산 (재료비 + 고정비 고려)
                const unitProfit = sellingPrice - costPerUnit;
                const dailyProfit = unitProfit * dailyProduction;

                // 결과 업데이트
                document.getElementById('cost-ratio').textContent = costRatio.toFixed(1) + '%';
                document.getElementById('unit-profit').textContent = Math.round(unitProfit).toLocaleString() + '원';
                document.getElementById('daily-profit').textContent = Math.round(dailyProfit).toLocaleString() + '원';

                // 원가 세부 내역 테이블 업데이트 (재료비 + 고정비 표시)
                updateCostBreakdownTable(totalMaterialCost, totalCost);
            }

            function updateCostBreakdownTable(materialCost, totalCost) {
                const table = document.getElementById('cost-breakdown-table');
                table.innerHTML = '';
                const addRow = (name, cost, total) => {
                    const percentage = total > 0 ? (cost / total * 100) : 0;
                    const row = document.createElement('tr');
                    row.innerHTML = `
      <td class="py-3 px-4 text-gray-700 border-b">${name}</td>
      <td class="py-3 px-4 text-right text-gray-700 border-b">${Math.round(cost).toLocaleString()}</td>
      <td class="py-3 px-4 text-right text-gray-700 border-b">${percentage.toFixed(1)}%</td>
`;
                    table.appendChild(row);
                };

                // 재료별 세부 내역 표시
                document.querySelectorAll('.material-item').forEach(item => {
                    const name = item.querySelector('.material-name').value || '재료';
                    const costText = item.querySelector('.material-cost').value;
                    const cost = parseFloat(costText.replace(' 원', '')) || 0;
                    addRow(`재료비 (${name})`, cost, totalCost);
                });

                // 고정비 표시
                const fixedCostText = document.getElementById('total-fixed-cost').textContent.replace(' 원', '').replace(/,/g, '');
                const fixedCost = parseFloat(fixedCostText) || 0;
                if (fixedCost > 0) {
                    addRow(`고정비`, fixedCost, totalCost);
                }

                // 총계 행
                const totalRow = document.createElement('tr');
                totalRow.className = 'bg-blue-50';
                totalRow.innerHTML = `
      <td class="py-3 px-4 font-medium text-gray-800">총 원가</td>
      <td class="py-3 px-4 text-right font-medium text-gray-800">${Math.round(totalCost).toLocaleString()}</td>
      <td class="py-3 px-4 text-right font-medium text-gray-800">100%</td>
`;
                table.appendChild(totalRow);
            }

            // 모든 입력 필드에 대한 이벤트 리스너 추가
            ['selling-price', 'daily-production', 'rent-cost', 'maintenance-cost', 'business-days', 'packaging-cost', 'shipping-cost'].forEach(id => {
                document.getElementById(id).addEventListener('input', calculateTotalCosts);
            });
            document.getElementById('shipping-included').addEventListener('change', calculateTotalCosts);

            // 재료비 계산 함수 수정
            function calculateMaterialsCost() {
                const materialItems = document.querySelectorAll('.material-item');
                let totalCost = 0;
                materialItems.forEach(item => {
                    const costText = item.querySelector('.material-cost').value;
                    const cost = parseFloat(costText.replace(' 원', '')) || 0;
                    totalCost += cost;
                });
                document.getElementById('total-materials-cost').textContent = totalCost.toLocaleString() + ' 원';
                calculateTotalCosts();
            }

            // 초기 계산 실행
            document.querySelectorAll('.material-item').forEach(item => {
                calculateMaterialUnitPrice(item);
            });
            calculateMaterialsCost();
            calculateFixedCost();
            calculateTotalCosts();
        });
        // 손익 계산기 함수들
        document.addEventListener('DOMContentLoaded', function () {
            // 변동비 항목 추가 버튼 이벤트
            const addVariableCostBtn = document.getElementById('add-variable-cost-btn');
            if (addVariableCostBtn) {
                addVariableCostBtn.addEventListener('click', function () {
                    const container = document.getElementById('variable-costs-container');
                    const newItem = document.createElement('div');
                    newItem.className = 'variable-cost-item grid grid-cols-12 gap-4';
                    newItem.innerHTML = `
        <div class="col-span-6">
          <input type="text" class="variable-cost-name w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="항목명 (예: 재료비)">
        </div>
        <div class="col-span-5">
          <input type="text" inputmode="numeric" 
              onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete','.'].includes(event.key);"
              oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
              class="variable-cost-percent w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="비율 (예: 30)">
        </div>
        <div class="col-span-1 flex items-center">
          <button class="text-gray-500 hover:text-red-500 delete-variable-cost">
            <div class="w-6 h-6 flex items-center justify-center">
              <i class="ri-delete-bin-line"></i>
            </div>
          </button>
        </div>
      `;
                    container.appendChild(newItem);

                    // 삭제 버튼 이벤트 추가
                    newItem.querySelector('.delete-variable-cost').addEventListener('click', function () {
                        container.removeChild(newItem);
                    });
                });
            }

            // 고정비 항목 추가 버튼 이벤트
            const addFixedCostBtn = document.getElementById('add-fixed-cost-btn');
            if (addFixedCostBtn) {
                addFixedCostBtn.addEventListener('click', function () {
                    const container = document.getElementById('fixed-costs-container');
                    const newItem = document.createElement('div');
                    newItem.className = 'fixed-cost-item grid grid-cols-12 gap-4';
                    newItem.innerHTML = `
        <div class="col-span-6">
          <input type="text" class="fixed-cost-name w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="항목명 (예: 임대료)">
        </div>
        <div class="col-span-5">
          <input type="text" inputmode="numeric" 
              onkeydown="return /^[0-9]$/.test(event.key) || ['Backspace','Tab','ArrowLeft','ArrowRight','Delete'].includes(event.key);" 
              oninput="this.value = this.value.replace(/[^0-9]/g, '')"
              class="fixed-cost-amount w-full px-4 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="금액 (예: 1000000)">
        </div>
        <div class="col-span-1 flex items-center">
          <button class="text-gray-500 hover:text-red-500 delete-fixed-cost">
            <div class="w-6 h-6 flex items-center justify-center">
              <i class="ri-delete-bin-line"></i>
            </div>
          </button>
        </div>
      `;
                    container.appendChild(newItem);

                    // 삭제 버튼 이벤트 추가
                    newItem.querySelector('.delete-fixed-cost').addEventListener('click', function () {
                        container.removeChild(newItem);
                    });
                });
            }

            // 초기 삭제 버튼 이벤트 설정
            document.querySelectorAll('.delete-variable-cost').forEach(button => {
                button.addEventListener('click', function () {
                    const container = document.getElementById('variable-costs-container');
                    const item = this.closest('.variable-cost-item');
                    if (container.querySelectorAll('.variable-cost-item').length > 1) {
                        container.removeChild(item);
                    } else {
                        alert('최소 하나의 변동비 항목이 필요합니다.');
                    }
                });
            });

            document.querySelectorAll('.delete-fixed-cost').forEach(button => {
                button.addEventListener('click', function () {
                    const container = document.getElementById('fixed-costs-container');
                    const item = this.closest('.fixed-cost-item');
                    if (container.querySelectorAll('.fixed-cost-item').length > 1) {
                        container.removeChild(item);
                    } else {
                        alert('최소 하나의 고정비 항목이 필요합니다.');
                    }
                });
            });
        });

        // 손익 계산 함수
        function calculateProfit() {
            const monthlySales = parseFloat(document.getElementById('monthly-sales').value) || 0;

            // 변동비 계산
            let totalVariableCost = 0;
            document.querySelectorAll('.variable-cost-percent').forEach(input => {
                const percent = parseFloat(input.value) || 0;
                totalVariableCost += monthlySales * (percent / 100);
            });

            // 고정비 계산
            let totalFixedCost = 0;
            document.querySelectorAll('.fixed-cost-amount').forEach(input => {
                const amount = parseFloat(input.value) || 0;
                totalFixedCost += amount;
            });

            // 순이익 계산
            const netProfit = monthlySales - totalVariableCost - totalFixedCost;
            const profitRate = monthlySales > 0 ? (netProfit / monthlySales * 100) : 0;

            // 결과 표시
            document.getElementById('var-cost-total').textContent = Math.round(totalVariableCost).toLocaleString() + '원';
            document.getElementById('fixed-cost-total').textContent = Math.round(totalFixedCost).toLocaleString() + '원';
            document.getElementById('net-profit').textContent = Math.round(netProfit).toLocaleString() + '원';
            document.getElementById('profit-rate').textContent = profitRate.toFixed(1);
            document.getElementById('profit-result').classList.remove('hidden');
        }
    </script>

    <footer class="bg-gray-100 mt-20 py-8">
        <div class="container mx-auto px-4 max-w-5xl">
            <div class="text-gray-600 text-sm space-y-2">
                <p>주식회사 에테르포지게임즈</p>
                <p>대표이사: 장영환 | 사업자등록번호: 305-86-42307</p>
                <p>주소: 인천광역시 서구 크리스탈로 78, 502</p>
                <p>고객센터: 010-8223-2455 (평일 10:00-19:00)</p>
                <p>이메일: aether4games@gmail.com</p>
            </div>
            <div class="mt-6 text-gray-500 text-xs">
                <p>© 2025 팔도장사</p>
            </div>
        </div>
    </footer>
    <script>
        function calculateTableRevenue() {
            const tables = parseFloat(document.getElementById('current-tables').value) || 0;
            const price = parseFloat(document.getElementById('current-price').value) || 0;
            const turnover = parseFloat(document.getElementById('current-turnover').value) || 0;
            const revenue = tables * price * turnover;
            document.getElementById('table-revenue-result').textContent = `예상 시간당 매출: ${revenue.toLocaleString()} 원`;
        }

        function calculateNewRevenue() {
            const currentRevenue = parseFloat(document.getElementById('current-tables').value || 0) *
                parseFloat(document.getElementById('current-price').value || 0) *
                parseFloat(document.getElementById('current-turnover').value || 0);
            const newTables = parseFloat(document.getElementById('new-tables').value) || 0;
            const newPrice = parseFloat(document.getElementById('new-price').value) || 0;
            const newTurnover = parseFloat(document.getElementById('new-turnover').value) || 0;
            const newRevenue = newTables * newPrice * newTurnover;
            const diff = newRevenue - currentRevenue;
            const percent = currentRevenue > 0 ? (diff / currentRevenue * 100) : 0;
            document.getElementById('new-revenue-result').textContent = `변경 후 시간당 매출: ${Math.round(newRevenue).toLocaleString()} 원`;
            document.getElementById('revenue-difference').textContent = `차이: ${Math.round(diff).toLocaleString()} 원 (${percent.toFixed(1)}%)`;
        }

        function calculateRequiredUnitPrice() {
            const goalRevenue = parseFloat(document.getElementById('goal-revenue').value) || 0;
            const tables = parseFloat(document.getElementById('goal-tables').value) || 1;
            const turnover = parseFloat(document.getElementById('goal-turnover').value) || 1;
            const requiredPrice = goalRevenue / (tables * turnover);
            document.getElementById('required-unit-result').textContent = `목표 객단가: 약 ${Math.round(requiredPrice).toLocaleString()} 원`;
        }
    </script>
</body>

</html>
